<!DOCTYPE html><meta charset="utf-8"><title>The `Render` trait
 â€“ Maud, a macro for writing HTML</title><link rel="stylesheet" href="styles.css"><meta name="theme-color" content="#808"><meta name="viewport" content="width=device-width"><header><h1><a href=".">maud</a></h1></header><nav><ul><li><a href="getting-started.html">Getting started</a></li><li><a href="text-escaping.html">Text and escaping</a></li><li><a href="elements-attributes.html">Elements and attributes</a></li><li><a href="splices-toggles.html">Splices and toggles</a></li><li><a href="control-structures.html">Control structures</a></li><li><a href="partials.html">Partials</a></li><li><b>The <code>Render</code> trait</b></li><li><a href="web-frameworks.html">Web framework integration</a></li><li><a href="faq.html">Frequently asked questions</a></li></ul><ul><li><a href="https://docs.rs/maud/">API documentation</a></li><li><a href="https://github.com/lambda-fairy/maud">GitHub</a></li></ul></nav><main><h2>The <code>Render</code> trait</h2><p>For most types, Maud will use the <a href="https://doc.rust-lang.org/std/fmt/trait.Display.html"><code>std::fmt::Display</code></a> trait to convert <a href="splices-toggles.html"><code>(spliced)</code></a> values to HTML.
(The result will be escaped automatically.)
If you'd like to override this behavior for your own type, then you can implement the <a href="https://docs.rs/maud/*/maud/trait.Render.html"><code>Render</code></a> trait instead.</p>
<p>Below are some examples of implementing <code>Render</code>.
Feel free to use these snippets in your own project!</p>
<h3><a href="#example-a-shorthand-for-including-css-stylesheets" aria-hidden="true" class="anchor" id="example-a-shorthand-for-including-css-stylesheets"></a>Example: a shorthand for including CSS stylesheets</h3>
<p>When writing a web page, it can be annoying to write <code>link rel=&quot;stylesheet&quot;</code> over and over again.
This example provides a shorthand for linking to CSS stylesheets.</p>
<pre style="background-color:#ffeeff;"><code class="language-rust"><span style="font-weight:bold;color:#a71d5d;">use </span><span style="color:#323232;">maud::{html, Markup, Render};
</span><span style="color:#323232;">
</span><span style="font-style:italic;color:#969896;">/// Links to a CSS stylesheet at the given path.
</span><span style="font-weight:bold;color:#a71d5d;">struct </span><span style="color:#323232;">Css(</span><span style="font-weight:bold;color:#a71d5d;">&amp;&#39;static str</span><span style="color:#323232;">);
</span><span style="color:#323232;">
</span><span style="font-weight:bold;color:#a71d5d;">impl </span><span style="color:#323232;">Render </span><span style="font-weight:bold;color:#a71d5d;">for </span><span style="color:#323232;">Css {
</span><span style="color:#323232;">    </span><span style="font-weight:bold;color:#a71d5d;">fn </span><span style="font-weight:bold;color:#795da3;">render</span><span style="color:#323232;">(</span><span style="font-weight:bold;color:#a71d5d;">&amp;</span><span style="color:#323232;">self) -&gt; Markup {
</span><span style="color:#323232;">        html! {
</span><span style="color:#323232;">            link rel</span><span style="font-weight:bold;color:#a71d5d;">=</span><span style="color:#183691;">&quot;stylesheet&quot; </span><span style="font-weight:bold;color:#a71d5d;">type=</span><span style="color:#183691;">&quot;text/css&quot;</span><span style="color:#323232;"> href</span><span style="font-weight:bold;color:#a71d5d;">=</span><span style="color:#323232;">(self.</span><span style="color:#0086b3;">0</span><span style="color:#323232;">);
</span><span style="color:#323232;">        }
</span><span style="color:#323232;">    }
</span><span style="color:#323232;">}
</span></code></pre>
<h3><a href="#example-a-wrapper-that-calls-stdfmtdebug" aria-hidden="true" class="anchor" id="example-a-wrapper-that-calls-stdfmtdebug"></a>Example: a wrapper that calls <code>std::fmt::Debug</code></h3>
<p>When debugging an application, it can be useful to see its internal state.
But these internal data types often don't implement <code>Display</code>.
This wrapper lets us use the <a href="https://doc.rust-lang.org/std/fmt/trait.Debug.html"><code>Debug</code></a> trait instead.</p>
<p>To avoid extra allocation, we override the <code>.render_to()</code> method instead of <code>.render()</code>.
This doesn't do any escaping by default, so we wrap the output in an <code>Escaper</code> as well.</p>
<pre style="background-color:#ffeeff;"><code class="language-rust"><span style="font-weight:bold;color:#a71d5d;">use </span><span style="color:#323232;">maud::{Escaper, html, Render};
</span><span style="font-weight:bold;color:#a71d5d;">use </span><span style="color:#323232;">std::fmt;
</span><span style="font-weight:bold;color:#a71d5d;">use </span><span style="color:#323232;">std::fmt::Write </span><span style="font-weight:bold;color:#a71d5d;">as _</span><span style="color:#323232;">;
</span><span style="color:#323232;">
</span><span style="font-style:italic;color:#969896;">/// Renders the given value using its `Debug` implementation.
</span><span style="font-weight:bold;color:#a71d5d;">struct </span><span style="color:#323232;">Debug&lt;T: fmt::Debug&gt;(T);
</span><span style="color:#323232;">
</span><span style="font-weight:bold;color:#a71d5d;">impl</span><span style="color:#323232;">&lt;T: fmt::Debug&gt; Render </span><span style="font-weight:bold;color:#a71d5d;">for </span><span style="color:#323232;">Debug&lt;T&gt; {
</span><span style="color:#323232;">    </span><span style="font-weight:bold;color:#a71d5d;">fn </span><span style="font-weight:bold;color:#795da3;">render_to</span><span style="color:#323232;">(</span><span style="font-weight:bold;color:#a71d5d;">&amp;</span><span style="color:#323232;">self, output: </span><span style="font-weight:bold;color:#a71d5d;">&amp;mut</span><span style="color:#323232;"> String) {
</span><span style="color:#323232;">        </span><span style="font-weight:bold;color:#a71d5d;">let mut</span><span style="color:#323232;"> escaper </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#323232;">Escaper::new(output);
</span><span style="color:#323232;">        write!(escaper, </span><span style="color:#183691;">&quot;</span><span style="color:#0086b3;">{:?}</span><span style="color:#183691;">&quot;</span><span style="color:#323232;">, self.</span><span style="color:#0086b3;">0</span><span style="color:#323232;">).</span><span style="color:#62a35c;">unwrap</span><span style="color:#323232;">();
</span><span style="color:#323232;">    }
</span><span style="color:#323232;">}
</span></code></pre>
<h3><a href="#example-rendering-markdown-using-pulldown-cmark-and-ammonia" aria-hidden="true" class="anchor" id="example-rendering-markdown-using-pulldown-cmark-and-ammonia"></a>Example: rendering Markdown using <code>pulldown-cmark</code> and <code>ammonia</code></h3>
<p><a href="https://docs.rs/pulldown-cmark/0.0.8/pulldown_cmark/index.html"><code>pulldown-cmark</code></a> is a popular library for converting Markdown to HTML.</p>
<p>We also use the <a href="https://github.com/notriddle/ammonia"><code>ammonia</code></a> library, which sanitizes the resulting markup.</p>
<pre style="background-color:#ffeeff;"><code class="language-rust"><span style="font-weight:bold;color:#a71d5d;">use</span><span style="color:#323232;"> ammonia;
</span><span style="font-weight:bold;color:#a71d5d;">use </span><span style="color:#323232;">maud::{Markup, PreEscaped, Render};
</span><span style="font-weight:bold;color:#a71d5d;">use </span><span style="color:#323232;">pulldown_cmark::{Parser, html};
</span><span style="color:#323232;">
</span><span style="font-style:italic;color:#969896;">/// Renders a block of Markdown using `pulldown-cmark`.
</span><span style="font-weight:bold;color:#a71d5d;">struct </span><span style="color:#323232;">Markdown&lt;T&gt;(T);
</span><span style="color:#323232;">
</span><span style="font-weight:bold;color:#a71d5d;">impl</span><span style="color:#323232;">&lt;T: AsRef&lt;</span><span style="font-weight:bold;color:#a71d5d;">str</span><span style="color:#323232;">&gt;&gt; Render </span><span style="font-weight:bold;color:#a71d5d;">for </span><span style="color:#323232;">Markdown&lt;T&gt; {
</span><span style="color:#323232;">    </span><span style="font-weight:bold;color:#a71d5d;">fn </span><span style="font-weight:bold;color:#795da3;">render</span><span style="color:#323232;">(</span><span style="font-weight:bold;color:#a71d5d;">&amp;</span><span style="color:#323232;">self) -&gt; Markup {
</span><span style="color:#323232;">        </span><span style="font-style:italic;color:#969896;">// Generate raw HTML
</span><span style="color:#323232;">        </span><span style="font-weight:bold;color:#a71d5d;">let mut</span><span style="color:#323232;"> unsafe_html </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#0086b3;">String</span><span style="color:#323232;">::new();
</span><span style="color:#323232;">        </span><span style="font-weight:bold;color:#a71d5d;">let</span><span style="color:#323232;"> parser </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#323232;">Parser::new(self.</span><span style="color:#0086b3;">0.</span><span style="color:#62a35c;">as_ref</span><span style="color:#323232;">());
</span><span style="color:#323232;">        html::push_html(</span><span style="font-weight:bold;color:#a71d5d;">&amp;mut</span><span style="color:#323232;"> unsafe_html, parser);
</span><span style="color:#323232;">        </span><span style="font-style:italic;color:#969896;">// Sanitize it with ammonia
</span><span style="color:#323232;">        </span><span style="font-weight:bold;color:#a71d5d;">let</span><span style="color:#323232;"> safe_html </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#323232;">ammonia::clean(</span><span style="font-weight:bold;color:#a71d5d;">&amp;</span><span style="color:#323232;">unsafe_html);
</span><span style="color:#323232;">        PreEscaped(safe_html)
</span><span style="color:#323232;">    }
</span><span style="color:#323232;">}
</span></code></pre>
</main><footer><p><a href="https://github.com/lambda-fairy/maud/tree/fb193d31462eea63eabfa705c93ccc56f5bb1eac">v0.27.0</a></p></footer>